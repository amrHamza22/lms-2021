<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>
<body >
    <div class="container" >
        <div class="row ">
            <div class="align-self-center mt-5">
                <h1 style="font-size: 100px; text-align: center;">Welcome To LMS</h1>
            </div>
            <div class="row align-self-center mt-5 justify-content-center" style="text-align: center;">
                <a href="https://lms-hamza2021.herokuapp.com/api/students" target="_blank" class="col-2 btn btn-primary btn-lg">Get All Students</a>
                <div class="col-1"></div>
                <a href="https://lms-hamza2021.herokuapp.com/api/courses" target="_blank" class="col-2 btn btn-danger btn-lg">Get All Courses</a>
            </div>
            <div class="row mb-6">
                <img class="mt-5 mb-5" src='https://www.schoology.com/sites/default/files/schoology-learning-management-system.jpg' alt="">
            </div>
            <br>
            <div class="row mt-6" style="box-shadow:3px 5px 15px rgba(3, 0, 0, 0.301) ; border-radius: 10px;">
            <div class="row ">
                <div class="col-2"></div>
                <div class="col-4 align-self-center">
                    <div class="input-group mb-3 mt-5">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="inputGroup-sizing-default">Student</span>
                        </div>
                        <input type="number" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" id="student">
                        <button id="getStudent" class="btn btn-primary ">Get Student</button>
                      </div>
                </div> 
                <div class="col-4 align-self-center">
                    <div class="input-group mb-3 mt-5">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="inputGroup-sizing-default">Course</span>
                        </div>
                        <input type="number"  class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" id="course">
                        <button id="getCourse" class="btn btn-danger ">Get Course</button>
                      </div>
                </div> 
                <div class="col-2"></div>
            </div>
            <div class="row mb-3">
                <div class="col-2"></div>
                <div class="col-4 align-self-center">
                    <div class="input-group mb-3 mt-5">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="inputGroup-sizing-default">Student</span>
                        </div>
                        <input type="number"  id="studentdel" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        <button id="delStudent" class="btn btn-primary ">Delete Student</button>
                      </div>
                </div> 
                <div class="col-4 align-self-center">
                    <div class="input-group mb-3 mt-5">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="inputGroup-sizing-default">Course</span>
                        </div>
                        <input type="number" id="coursedel" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                        <button id="delCourse" class="btn btn-danger ">Delete Course</button>
                      </div>
                </div> 
            </div>
                <div class="col-2"></div>
            </div>
            <div class="row mt-5 mb-3">
                <div class="col-4"></div>
                <h1 class="col-4 align-self-center" style=" text-align: center; font-size: 5rem; ">Assign</h1>
                <div class="col-4"></div>
            </div>
            <div class="row mt-3" style="box-shadow:3px 5px 15px rgba(3, 0, 0, 0.301) ; border-radius: 10px;">
                <div class="col-2"></div>
                <form class="col-4 studentReg" onsubmit="return false">
                    <div class="form-group">
                      <label">Student Name</label>
                      <input type="name" class="form-control" id="studentName"  placeholder="Enter name">
                    </div>
                    <div class="form-group">
                        <label">Code</label>
                        <input type="number" class="form-control" id="studentCode"  placeholder="Enter Code">
                      </div>
                    <button  id='assignst' class="btn btn-primary mt-3 mb-3">Add Student</button>
                  </form>

                  <form class="col-4 courseReg" onsubmit="return false">
                    <div class="form-group">
                      <label">course name</label>
                      <input type="name" class="form-control" id="courseName"  placeholder="Enter name">
                    </div>
                    <div class="form-group">
                        <label">Code</label>
                        <input type="text"   class="form-control" id="courseCode"  placeholder="Enter Code">
                      </div>
                      <div class="form-group">
                        <label">description</label>
                        <textarea class="form-control" id="courseDesc" cols="30" rows="10"></textarea>
                      </div>
                    <button id="assignco" class="btn btn-primary mt-3 mb-5">Add Course</button>
                  </form>
                  <div class="col-2"></div>
            </div>
            </div>
            <div class="row mt-5 mb-3"><h1 style="text-align: center; font-size: 5rem;">Edit</h1></div>
            <div class="row mt-3 mb-5" style="box-shadow:3px 5px 15px rgba(3, 0, 0, 0.301) ; border-radius: 10px;">
                <div class="col-2"></div>
                <form class="col-4" onsubmit="return false">
                    <div class="form-group">
                        <label">Student id</label>
                        <input type="number"  class="form-control" id="studentid"  placeholder="Enter name">
                      </div>
                    <div class="form-group">
                      <label">Student Name</label>
                      <input type="name" class="form-control" id="studentnewname"  placeholder="Enter name">
                    </div>
                    <div class="form-group">
                        <label">Code</label>
                        <input type="number" class="form-control" id="studentnewcode"  placeholder="Enter Code">
                      </div>
                    <button id="editst" class="btn btn-primary mt-3 mb-3">Edit Student</button>
                  </form>

                  <form class="col-4" onsubmit="return false">
                    <label">Course id</label>
                    <input type="number"  class="form-control" id="courseid" >
                    <div class="form-group" >
                      <label">course name</label>
                      <input type="name" class="form-control" id="coursenewname"  placeholder="Enter name">
                    </div>
                    <div class="form-group">
                        <label">Code</label>
                        <input type="text" class="form-control" id="coursenewcode"  placeholder="Enter Code">
                      </div>
                      <div class="form-group">
                        <label">description</label>
                        <textarea class="form-control" id="coursenewdesc" cols="30" rows="10"></textarea>
                      </div>
                    <button onsubmit="return false" type="button" id="editco" class="btn btn-primary mt-3 mb-3">Edit Course</button>
                  </form>
                  <div class="col-2"></div>
            </div>
            <div class="row mb-5"><h2 style="font-size: 3rem; text-align: center; color: brown;">Response will appear here</h2></div>
            <div class="row mb-3" style="font-size: 2rem;" id="res"></div>
            </div>
        </div>
    </div>
</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
  base_url='https://cors-anywhere.herokuapp.com/https://lms-hamza2021.herokuapp.com/'
    document.getElementById('getCourse').addEventListener('click',async ()=>{
        const response = await axios.get(base_url+'api/courses/'+ document.getElementById('course').value)
        document.getElementById('res').innerHTML=JSON.stringify(response.data)

    })

    document.getElementById('getStudent').addEventListener('click',async ()=>{
        const response = await axios.get(base_url+'api/students/'+ document.getElementById('student').value)
        document.getElementById('res').innerHTML=JSON.stringify(response.data)

    })

    document.getElementById('delStudent').addEventListener('click',async ()=>{
        const response = await axios.delete(base_url+'api/students/'+ document.getElementById('studentdel').value)
        document.getElementById('res').innerHTML=JSON.stringify(response.data)

    })

    document.getElementById('delCourse').addEventListener('click',async ()=>{
        const response = await axios.delete(base_url+'api/courses/'+ document.getElementById('coursedel').value)
        document.getElementById('res').innerHTML=JSON.stringify(response.data)
        
    })
    document.getElementById('assignst').addEventListener('click',async (e)=>{
      e.preventDefault();
      const body={
        "name":document.getElementById('studentName').value,
        "code":document.getElementById('studentCode').value
      }
      console.log(body)
      await axios.post(base_url+'web/students/create',body).then((res) => {
          document.getElementById('res').innerHTML=JSON.stringify(res.data)
      })
      .catch((err) => {
        document.getElementById('res').innerHTML=JSON.stringify(err)
      });
    })
    document.getElementById('assignco').addEventListener('click',async (e)=>{
      e.preventDefault();
      const body={
        "name":document.getElementById('courseName').value,
        "code":document.getElementById('courseCode').value,}
        if (document.getElementById('courseDesc').value){
          body.description=document.getElementById('courseDesc').value
        }
      console.log(body)
        await axios.post(base_url+'web/courses/create',body)
      .then((response) => {
          document.getElementById('res').innerHTML=JSON.stringify(response.data)
      })
      .catch((err) => {
        console.log(err)
        document.getElementById('res').innerHTML=JSON.stringify(err)
      })        
    })


    document.getElementById('editst').addEventListener('click',async (e)=>{
      e.preventDefault();
      const body={}
      if(document.getElementById('studentnewname').value){
        body.name=document.getElementById('studentnewname').value
      }
      if(document.getElementById('studentnewcode').value){
        body.code=document.getElementById('studentnewcode').value
      }
      console.log(body)
      await axios.put(base_url+'web/students/'+document.getElementById('studentid').value,body).then((res) => {
          document.getElementById('res').innerHTML=JSON.stringify(res.data)
      })
      .catch((err) => {
        document.getElementById('res').innerHTML=JSON.stringify(err)
      });
    })
    document.getElementById('editco').addEventListener('click',async (e)=>{
      
     const body={}
      if(document.getElementById('coursenewname').value){
        body.name=document.getElementById('coursenewname').value
      }
      if(document.getElementById('coursenewcode').value){
        body.code=document.getElementById('coursenewcode').value
      }
      if(document.getElementById('coursenewdesc').value){
        body.description=document.getElementById('coursenewdesc').value
      }
      
      console.log(body)
        await axios.put(base_url+'web/courses/'+document.getElementById('courseid').value,body,{redirect:'manual'})
      .then((response) => {
        
          document.getElementById('res').innerHTML=JSON.stringify(response.data)
      })
      .catch((err) => {
        console.log(err)
      })        
    })
</script>
</html>
